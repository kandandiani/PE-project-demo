<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>快速排序</title>
</head>

<body>
  <!-- <script>
    function quickSort(arr) {
      debugger;
      if (arr.length <= 1) return;
      //取数组最接近中间的数位基准，奇数与偶数取值不同，但不印象，当然，你可以选取第一个，或者最后一个数为基准，这里不作过多描述
      var pivotIndex = Math.floor(arr.length / 2);
      var pivot = arr.splice(pivotIndex, 1)[0];
      //左右区间，用于存放排序后的数
      var left = [];
      var right = [];

      console.log('基准为：' + pivot + ' 时');
      for (var i = 0; i < arr.length; i++) {
        console.log('分区操作的第 ' + (i + 1) + ' 次循环：');
        //小于基准，放于左区间，大于基准，放于右区间
        if (arr[i] < pivot) {
          left.push(arr[i]);
          console.log('左边：' + (arr[i]))
        } else {
          right.push(arr[i]);
          console.log('右边：' + (arr[i]))
        }
      }
      //这里使用concat操作符，将左区间，基准，右区间拼接为一个新数组
      //然后递归1，2步骤，直至所有无序区间都 只剩下一个元素 ，递归结束
      return quickSort(left).concat([pivot], quickSort(right));
    }
    var arr = [14, 3, 15, 7, 2, 76, 11];
    console.log(quickSort(arr));
  </script> -->
  <script>
    function quickSort(arr) {
      // 交换
      function swap(arr, a, b) {
        var temp = arr[a];
        arr[a] = arr[b];
        arr[b] = temp;
      }
      // 分区
      function partition(arr, left, right) {
        /**
         * 开始时不知最终pivot的存放位置，可以先将pivot交换到后面去
         * 这里直接定义最右边的元素为基准
         */
        var pivot = arr[right];
        /**
         * 存放小于pivot的元素时，是紧挨着上一元素的，否则空隙里存放的可能是大于pivot的元素，
         * 故声明一个storeIndex变量，并初始化为left来依次紧挨着存放小于pivot的元素。
         */
        var storeIndex = left;
        for (var i = left; i < right; i++) {
          if (arr[i] < pivot) {
            /**
             * 遍历数组，找到小于的pivot的元素，（大于pivot的元素会跳过）
             * 将循环i次时得到的元素，通过swap交换放到storeIndex处，
             * 并对storeIndex递增1，表示下一个可能要交换的位置
             */
            swap(arr, storeIndex, i);
            storeIndex++;
          }
        }
        // 最后： 将pivot交换到storeIndex处，基准元素放置到最终正确位置上
        swap(arr, right, storeIndex);
        return storeIndex;
      }

      function sort(arr, left, right) {
        if (left > right) return;

        var storeIndex = partition(arr, left, right);
        sort(arr, left, storeIndex - 1);
        sort(arr, storeIndex + 1, right);
      }

      sort(arr, 0, arr.length - 1);
      return arr;
    }

    console.log(quickSort([8, 4, 90, 8, 34, 67, 1, 26, 17]));
  </script>
</body>

</html>